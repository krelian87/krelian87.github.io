<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content=" Computational Graphics 2012/2013 Final Project : Marco Sbaffoni - 283934" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title> Computational Graphics 2012/2013 Final Project</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/krelian87">View on GitHub</a>

          <h1 id="project_title"> Computational Graphics 2012/2013 Final Project</h1>
          <h2 id="project_tagline">Marco Sbaffoni - 283934</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="a-3d-representation-of-etr-450-and-etr-480-trains-of-the-pendolino-series-created-using-plasm-modeling-language-in-javascript-and-python" class="anchor" href="#a-3d-representation-of-etr-450-and-etr-480-trains-of-the-pendolino-series-created-using-plasm-modeling-language-in-javascript-and-python"><span class="octicon octicon-link"></span></a>A 3D representation of ETR 450 and ETR 480, trains of the <em>Pendolino</em> series, created using PLaSM modeling language in Javascript and Python</h1>

<p>For the final project of the Computational Graphics course at Roma Tre University, I chose to represent two models of glorious <em>Pendolino</em> train series, namely the ETR 450 and the ETR 480.</p>

<h3>
<a name="table-of-content" class="anchor" href="#table-of-content"><span class="octicon octicon-link"></span></a>Table of content</h3>

<ul>
<li>
<a href="#the-pendolino-train-series">The History of Pendolino</a> </li>
<li><a href="#the-etr-450">The ETR 450</a></li>
<li><a href="#the-etr-480">The ETR 480</a></li>
<li><a href="#source-code">Source Code</a></li>
<li><a href="#credits">Credits</a></li>
</ul><h2>
<a name="the-pendolino-train-series" class="anchor" href="#the-pendolino-train-series"><span class="octicon octicon-link"></span></a>The Pendolino train series</h2>

<h3>
<a name="a-success-of-italian-industrial-design" class="anchor" href="#a-success-of-italian-industrial-design"><span class="octicon octicon-link"></span></a>A success of Italian industrial design</h3>

<p>Pendolino is an Italian family of tilting trains used in Italy, Spain, Portugal, Slovenia, Finland, Russian Federation, the Czech Republic, the United Kingdom, Slovakia, Switzerland, China and shortly in Romania and Poland. Based on the design of the Italian ETR 401 and the British Advanced Passenger Train, it was further developed and manufactured by Fiat Ferroviaria, which was taken over by Alstom in 2000.</p>

<p>The idea of a tilting train became popular in the 1960s and 1970s when various rail operators, impressed by the high-speed rail services being introduced in France and Japan, wondered how they could similarly speed up travel without building a dedicated parallel rail network (as those two countries were doing). By tilting, the train could go around curves designed for slower trains at higher speeds without causing undue discomfort to passengers.</p>

<p>In Italy, various possibilities were explored (including one early design for fixed carriages with tilting seats). A number of prototypes were built and tested, including an automotrice (self-propelled) derived from ALn 668 diesel car and provided with tilting seats. The first working prototype using a tilting carbody was ETR Y 0160, an electrically powered car launched by FIAT in 1969. This was the first to be christened Pendolino.</p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/reference-images/ETR401.jpg" alt="The first prototype of Pendolino."></p>

<h3>
<a name="the-beginning" class="anchor" href="#the-beginning"><span class="octicon octicon-link"></span></a>The Beginning</h3>

<p>It led to the construction of a whole EMU in 1975, the ETR 401, built in two units by FIAT. One was put into public service on 2 July 1976 on the Rome-Ancona (later extended to Rimini) line, operated by Italian State Railways (Ferrovie dello Stato). Between Roma and Ancona (km. 295) the train took 2 hours and 50 minutes while the ordinary trains took 3 hours and 30 minutes. The train had four cars and was mostly considered a travelling laboratory for the new technology. The second unit was adapted for service to the wide-gauge RENFE Spanish lines.</p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/reference-images/ETR450.jpg" alt="The ETR 450, the first Pendolino train to enter regular service in the world."></p>

<p>In 1982, FIAT acquired patents for the tilting bogie used in the ill-fated British project APT. This and other improvements led to the introduction of the more advanced ETR 450, the first Pendolino to enter regular service in the world. Characterized by an 8-car (later 9-car, with the addition of a restaurant coach) configuration, ETR 450 could run the Rome-Milan line in under four hours, at speeds up to 250 km/h. Passenger numbers increased from 220,000 in 1988 to 2.2 million in 1993.</p>

<h3>
<a name="the-past" class="anchor" href="#the-past"><span class="octicon octicon-link"></span></a>The past</h3>

<p>In 1993, the next generation, the ETR 460, styled by Giorgetto Giugiaro, began service. Though plagued by technical teething problems, the ETR 460 introduced several innovations, such as more powerful AC asynchronous motors. Further, the pistons actuating the anti-tilting action were placed in the bogie instead of on the carbody sides: this permitted the reorganisation of the vestibules and passenger compartment areas, improving comfort. The bogie-to-body connection is extremely simple and easy to make, with clear advantages for maintenance. For safety and comfort reasons, maximum tilt was reduced to 8° from the 13° of ETR 450.</p>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/reference-images/ETR460.jpg" alt="ETR 460, a new generation by Giugiaro"></p>

<p>ETR 460 keeps axle load to an extremely low level (14.5 ton/axle) to allow the train to negotiate curves up to 35% faster than conventional Intercity trains (loco plus coaches). The body, which exploits large aluminium extrusion technology, has substantial modularity and allows for extremely low axle weight, whilst fully respecting the highest safety standards, and allows the best exploitation of the space with different loading gauges.</p>

<p>ETR 460 was built in only 10 units. Improved versions include ETR 470 for the Italo-Swiss Cisalpino company and the ETR 480, used by Trenitalia under AC lines such as those in France and Switzerland. A total of 34 EMUs of the ETR 460/470/480 series were built.</p>

<h3>
<a name="the-present" class="anchor" href="#the-present"><span class="octicon octicon-link"></span></a>The present</h3>

<p>FIAT Ferroviaria was sold to the French Alstom company in 2000. The development of the Pendolino technology continued in the Italian factories of Alstom and the next generation, the New Pendolino, was delivered to Trenitalia and Cisalpino as the ETR 600 and the ETR 610 from 2006.</p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/reference-images/ETR600.jpg" alt="ETR 600, the New Pendolino."></p>

<h2>
<a name="the-etr-450" class="anchor" href="#the-etr-450"><span class="octicon octicon-link"></span></a>The ETR 450</h2>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/reference-images/ETR450-2.jpg" alt="ETR 450 on the run"></p>

<h3>
<a name="technical-information" class="anchor" href="#technical-information"><span class="octicon octicon-link"></span></a>Technical information</h3>

<ul>
<li>Construction years: 1987 - 1992</li>
<li>Max. speed (in service): 250 km/h (155 mph)</li>
<li>Max. tilting angle: 8°</li>
<li>Total number of seats: 390 (220 II + 170 I)</li>
</ul><h3>
<a name="3d-representation" class="anchor" href="#3d-representation"><span class="octicon octicon-link"></span></a>3D Representation</h3>

<p>I chose to divide the model in some main parts: the front face, two sides and the top. These parts will form the main structure of the train.
Let's begin with the top of the train: this is the code in PyPlasm and a screen of the result.</p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">generateTop450</span><span class="p">():</span>
    <span class="n">height</span><span class="o">=</span><span class="mf">1.2</span>
    <span class="n">Su0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainLength</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">Su1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainLength</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">control2</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">height</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">height</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">Sv0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)(</span><span class="n">control2</span><span class="p">)</span>
    <span class="n">control3</span><span class="o">=</span><span class="p">[[</span><span class="n">trainLength</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainLength</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">height</span><span class="p">],[</span><span class="n">trainLength</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">height</span><span class="p">],[</span><span class="n">trainLength</span><span class="p">,</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">Sv1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)(</span><span class="n">control3</span><span class="p">)</span>
    <span class="n">out</span><span class="o">=</span><span class="n">MAP</span><span class="p">(</span><span class="n">COONSPATCH</span><span class="p">([</span><span class="n">Su0</span><span class="p">,</span><span class="n">Su1</span><span class="p">,</span><span class="n">Sv0</span><span class="p">,</span><span class="n">Sv1</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/screenshot/top450.png" alt="The structure of top part of ETR 450"></p>

<p>Here is the Python code and the relative screenshot for the two sides of the ETR 450: </p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">genLRS450</span><span class="p">():</span>
    <span class="n">adjust</span><span class="o">=</span><span class="mf">0.85</span>
    <span class="n">adjustBase</span><span class="o">=</span><span class="mf">0.25</span> 
    <span class="n">Su0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">Su1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">Sv0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">Sv1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">out1</span><span class="o">=</span><span class="n">MAP</span><span class="p">(</span><span class="n">COONSPATCH</span><span class="p">([</span><span class="n">Su0</span><span class="p">,</span><span class="n">Su1</span><span class="p">,</span><span class="n">Sv0</span><span class="p">,</span><span class="n">Sv1</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="n">sU0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">sU1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">sV0</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">sV1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">trainLength</span><span class="p">]])</span>
    <span class="n">out2</span><span class="o">=</span><span class="n">MAP</span><span class="p">(</span><span class="n">COONSPATCH</span><span class="p">([</span><span class="n">sU0</span><span class="p">,</span><span class="n">sU1</span><span class="p">,</span><span class="n">sV0</span><span class="p">,</span><span class="n">sV1</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="n">out</span><span class="o">=</span><span class="n">STRUCT</span><span class="p">([</span><span class="n">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="n">PI</span><span class="p">),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">out1</span><span class="p">,</span><span class="n">out2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/screenshot/LRS450.png" alt="The structure of the sides of ETR 450"></p>

<p>In the end, the code for the front part of ETR 450: instead of using COONSPATCH function, I chose to use only BEZIER for modeling the surface.</p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">genFrontSide450</span><span class="p">():</span>
    <span class="n">adjust</span> <span class="o">=</span> <span class="mf">0.85</span>
    <span class="n">adjustBase</span> <span class="o">=</span> <span class="mf">0.25</span>
    <span class="n">cc0</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">]])</span>
    <span class="n">c0</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">]])</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">]])</span>
    <span class="n">c2</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">16</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">]])</span>
    <span class="n">c3</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">],[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">etr450adjust</span><span class="p">]])</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">MAP</span><span class="p">(</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([</span><span class="n">cc0</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">,</span><span class="n">c3</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="n">outT</span> <span class="o">=</span> <span class="n">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="o">-</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="n">outT</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/screenshot/front450.png" alt="The structure of the front part of ETR 450"></p>

<p>Now, the code for the base of the lateral doors and one of the lateral windows.</p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">generateDoor450</span><span class="p">():</span>
    <span class="n">c1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">c2</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">fin</span><span class="o">=</span><span class="n">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="n">MAP</span><span class="p">(</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">))</span>
    <span class="n">c3</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="mf">1.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.4</span><span class="p">]])</span>
    <span class="n">c4</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.7</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.3</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mf">0.4</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.4</span><span class="p">]])</span>
    <span class="n">doorBase</span><span class="o">=</span><span class="n">COLOR</span><span class="p">(</span><span class="n">col</span><span class="p">)(</span><span class="n">MAP</span><span class="p">(</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([</span><span class="n">c3</span><span class="p">,</span><span class="n">c4</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">))</span>
    <span class="n">doorTemp</span><span class="o">=</span><span class="n">STRUCT</span><span class="p">([</span><span class="n">doorBase</span><span class="p">,</span><span class="n">T</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])([</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">0.35</span><span class="p">]),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="o">-</span><span class="n">PI</span><span class="o">/</span><span class="mi">20</span><span class="p">),</span><span class="n">fin</span><span class="p">])</span>
    <span class="n">door</span><span class="o">=</span><span class="n">STRUCT</span><span class="p">([</span><span class="n">T</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])([</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.7</span><span class="p">]),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="o">-</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">doorTemp</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">door</span>
</pre></div>

<p><img src="https://github.com/krelian87/krelian87.github.io/raw/master/screenshot/door450.png" alt="An example of lateral door of ETR 450"></p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">generateWindow450</span><span class="p">():</span>
    <span class="n">c1</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">c2</span><span class="o">=</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
    <span class="n">temp</span><span class="o">=</span><span class="n">MAP</span><span class="p">(</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S2</span><span class="p">)([</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="n">out</span><span class="o">=</span><span class="n">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="n">STRUCT</span><span class="p">([</span><span class="n">T</span><span class="p">([</span><span class="mi">2</span><span class="p">])([</span><span class="mf">0.29</span><span class="p">]),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="o">-</span><span class="n">PI</span><span class="o">/</span><span class="mi">16</span><span class="p">),</span><span class="n">T</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])([</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span><span class="o">-</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mf">0.65</span><span class="p">]),</span><span class="n">R</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">temp</span><span class="p">]))</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/window450.png" alt="An example of lateral window of ETR 450"></p>

<p>In <em>plasm.js</em>  I defined every particular of the model (colors, windows, doors, wheels, the windshield); here some pictures of these elements and their relative code.</p>

<div class="highlight"><pre><span class="kd">function</span> <span class="nx">generateWheel450</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">thick1</span> <span class="o">=</span> <span class="nx">railWidth</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">thick2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">railWidth</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span><span class="o">*</span><span class="mi">6</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">DISK</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)(</span><span class="mi">32</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w2</span> <span class="o">=</span> <span class="nx">DISK</span><span class="p">(</span><span class="mf">0.6</span><span class="p">)(</span><span class="mi">16</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w3</span> <span class="o">=</span> <span class="nx">EXTRUDE</span><span class="p">([</span><span class="nx">thick1</span><span class="p">])(</span><span class="nx">w1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">w4</span> <span class="o">=</span> <span class="nx">EXTRUDE</span><span class="p">([</span><span class="nx">thick2</span><span class="p">])(</span><span class="nx">w2</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">w3</span><span class="p">,</span><span class="nx">w4</span><span class="p">]);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">generateWheels450</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">generateWheel450</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">w2</span> <span class="o">=</span> <span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">])([</span><span class="nx">distance</span><span class="p">])(</span><span class="nx">w1</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">cylB</span> <span class="o">=</span> <span class="nx">DISK</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)(</span><span class="mi">16</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">cyl</span> <span class="o">=</span> <span class="nx">EXTRUDE</span><span class="p">([</span><span class="nx">distance</span><span class="p">])(</span><span class="nx">cylB</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">side1Temp</span> <span class="o">=</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">T</span><span class="p">([</span><span class="mi">1</span><span class="p">])([</span><span class="mf">0.25</span><span class="p">]),</span><span class="nx">w1</span><span class="p">,</span><span class="nx">w2</span><span class="p">,</span><span class="nx">T</span><span class="p">([</span><span class="mi">2</span><span class="p">])([</span><span class="nx">railWidth</span><span class="p">]),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">cyl</span><span class="p">]);</span>
    <span class="kd">var</span> <span class="nx">side1</span> <span class="o">=</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">side1Temp</span><span class="p">]);</span>
    <span class="kd">var</span> <span class="nx">side2</span> <span class="o">=</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])([</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainWidth</span><span class="o">-</span><span class="mf">0.2</span><span class="p">]),</span><span class="nx">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="p">),</span><span class="nx">side1</span><span class="p">]);</span>

    <span class="kd">var</span> <span class="nx">front</span> <span class="o">=</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])([</span><span class="mf">3.5</span><span class="p">,</span><span class="o">-</span><span class="nx">trainHeight</span><span class="p">]),</span><span class="nx">side1</span><span class="p">,</span><span class="nx">side2</span><span class="p">]);</span>

    <span class="k">return</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">])(</span><span class="nx">STRUCT</span><span class="p">([</span><span class="nx">front</span><span class="p">,</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">])([</span><span class="nx">trainLength</span><span class="o">-</span><span class="mf">10.5</span><span class="p">]),</span><span class="nx">front</span><span class="p">]));</span>
<span class="p">}</span>

</pre></div>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/wheels450.png" alt="Wheels of the ETR 450 model"></p>

<div class="highlight"><pre><span class="kd">function</span> <span class="nx">generateWindshield450</span><span class="p">(){</span>

    <span class="kd">var</span> <span class="nx">p1</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>
        <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>

        <span class="kd">var</span> <span class="nx">fin</span> <span class="o">=</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="nx">MAP</span><span class="p">(</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S1</span><span class="p">)([</span><span class="nx">c1</span><span class="p">,</span><span class="nx">c2</span><span class="p">]))(</span><span class="nx">dom2D</span><span class="p">));</span>

        <span class="k">return</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])([</span><span class="o">-</span><span class="mf">0.65</span><span class="p">,</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mf">0.17</span><span class="p">]),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="o">-</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">fin</span><span class="p">]);};</span>

    <span class="kd">var</span> <span class="nx">lat1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>
        <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
                        <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>

        <span class="kd">var</span> <span class="nx">fin</span> <span class="o">=</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="nx">MAP</span><span class="p">(</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S1</span><span class="p">)([</span><span class="nx">c1</span><span class="p">,</span><span class="nx">c2</span><span class="p">]))(</span><span class="nx">dom2D</span><span class="p">));</span>

        <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="nx">STRUCT</span><span class="p">([</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">5</span><span class="p">),</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])([</span><span class="o">-</span><span class="mf">0.52</span><span class="p">,</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mf">1.28</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">]),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="o">-</span><span class="nx">PI</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">fin</span><span class="p">]));</span>

        <span class="k">return</span> <span class="nx">out</span><span class="p">;};</span>

    <span class="kd">var</span> <span class="nx">lat2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>  
        <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
                            <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>
        <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.02</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">0</span><span class="p">]]);</span>

        <span class="kd">var</span> <span class="nx">fin</span> <span class="o">=</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="nx">MAP</span><span class="p">(</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S1</span><span class="p">)([</span><span class="nx">c1</span><span class="p">,</span><span class="nx">c2</span><span class="p">]))(</span><span class="nx">dom2D</span><span class="p">));</span>

        <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">1.71</span><span class="p">,</span><span class="mf">2.05</span><span class="p">,</span><span class="mf">2.55</span><span class="p">])(</span><span class="nx">STRUCT</span><span class="p">([</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">5</span><span class="p">),</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])([</span><span class="o">-</span><span class="mf">0.52</span><span class="p">,</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mf">1.28</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">]),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="nx">PI</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="nx">fin</span><span class="p">]));</span>

        <span class="k">return</span> <span class="nx">out</span><span class="p">;};</span>

    <span class="k">return</span> <span class="nx">STRUCT</span><span class="p">([</span><span class="nx">p1</span><span class="p">(),</span><span class="nx">lat1</span><span class="p">(),</span><span class="nx">lat2</span><span class="p">()]);</span>
<span class="p">}</span>

</pre></div>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/window450.png" alt="The windshield of the ETR 450 model"></p>

<p>So, this is the final result: here you can find some screenshots, or you can see it in action in the <em>plasm.js</em> environment.</p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr450-1.png" alt="The ETR 450 model"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr450-2.png" alt="The ETR 450 model"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr450-3.png" alt="The ETR 450 model"></p>

<h2>
<a name="the-etr-480" class="anchor" href="#the-etr-480"><span class="octicon octicon-link"></span></a>The ETR 480</h2>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/reference-images/ETR480.JPEG" alt="The ETR 480, in a new livery"></p>

<h3>
<a name="technical-information-1" class="anchor" href="#technical-information-1"><span class="octicon octicon-link"></span></a>Technical information</h3>

<ul>
<li>Construction years: 1996 - 1998 </li>
<li>Max. speed (in service): 250 km/h (155 mph)</li>
<li>Traction system: = 3 kV (all 15 trainsets)</li>
<li>Power: 6 MW (8,000 hp)</li>
<li>Length: 236.6 m (776 ft)</li>
<li>Max. tilting angle: 8°</li>
<li>Total number of seats: 480 (341 II + 139 I)</li>
</ul><h3>
<a name="3d-representation-1" class="anchor" href="#3d-representation-1"><span class="octicon octicon-link"></span></a>3D Representation</h3>

<p>Like the ETR 450 model, I divided the structure in some parts (top, sides, front); for example, this is the Python code for the front part of ETR 480 model.</p>

<div class="highlight"><pre><span class="k">def</span> <span class="nf">genFrontSide480</span><span class="p">():</span>
    <span class="n">adjust</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="n">adjustBase</span> <span class="o">=</span> <span class="mf">0.15</span>
    <span class="n">leng</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mf">0.9</span>
    <span class="n">etr480adjust</span> <span class="o">=</span> <span class="mf">0.8</span>
    <span class="n">adj</span> <span class="o">=</span> <span class="mf">1.8</span>
    <span class="n">cc0</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">height</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="n">height</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">]])</span>
    <span class="n">c0</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">height</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">]])</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">]])</span>
    <span class="n">c4</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">leng</span><span class="o">+</span><span class="n">adj</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">leng</span><span class="o">+</span><span class="n">adj</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">leng</span><span class="o">+</span><span class="n">adj</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">leng</span><span class="o">+</span><span class="n">adj</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="n">leng</span><span class="o">+</span><span class="n">adj</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">]])</span>
    <span class="n">c2</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">leng</span><span class="p">],[</span><span class="o">-</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">leng</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">leng</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">leng</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">leng</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjust</span><span class="p">,</span><span class="n">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">]])</span>
    <span class="n">c3</span> <span class="o">=</span> <span class="n">BEZIER</span><span class="p">(</span><span class="n">S0</span><span class="p">)([[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="n">trainWidth</span><span class="o">+</span><span class="n">adjustBase</span><span class="p">,</span><span class="n">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="n">etr480adjust</span><span class="p">]])</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">MAP</span><span class="p">(</span><span class="n">BEZIER</span><span class="p">(</span><span class="n">S1</span><span class="p">)([</span><span class="n">cc0</span><span class="p">,</span><span class="n">cc0</span><span class="p">,</span><span class="n">cc0</span><span class="p">,</span><span class="n">c0</span><span class="p">,</span><span class="n">c4</span><span class="p">,</span><span class="n">c4</span><span class="p">,</span><span class="n">c2</span><span class="p">,</span><span class="n">c2</span><span class="p">,</span><span class="n">c3</span><span class="p">,</span><span class="n">c3</span><span class="p">,</span><span class="n">c3</span><span class="p">]))(</span><span class="n">dom2D</span><span class="p">)</span>
    <span class="n">outT</span> <span class="o">=</span> <span class="n">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="n">out</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">R</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])(</span><span class="o">-</span><span class="n">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="n">outT</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/front480.png" alt="The structure of the front of ETR 480"></p>

<p>Some hard work was requested for the front livery: it has been created using by overlapping some surfaces. Here's the code in Javascript and relative screenshots.</p>

<div class="highlight"><pre><span class="kd">function</span> <span class="nx">generateFrontLivery480</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">adjust</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">adjustBase</span> <span class="o">=</span> <span class="mf">0.15</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">leng</span> <span class="o">=</span> <span class="mf">2.13</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">etr480adjust</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">adj</span> <span class="o">=</span> <span class="mf">2.9</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">cc0</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c0</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">height</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c3</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjustBase</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjustBase</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjustBase</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjustBase</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c4</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">MAP</span><span class="p">(</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S1</span><span class="p">)([</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">c0</span><span class="p">,</span><span class="nx">c4</span><span class="p">,</span><span class="nx">c4</span><span class="p">,</span><span class="nx">c2</span><span class="p">,</span><span class="nx">c2</span><span class="p">,</span><span class="nx">c3</span><span class="p">,</span><span class="nx">c3</span><span class="p">,</span><span class="nx">c3</span><span class="p">]))(</span><span class="nx">dom2D</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">outT</span> <span class="o">=</span> <span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="nx">out</span><span class="p">);</span>
    <span class="nx">out</span> <span class="o">=</span> <span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="o">-</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="nx">outT</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">])(</span><span class="nx">STRUCT</span><span class="p">([</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">])([</span><span class="o">-</span><span class="nx">etr450adjust</span><span class="o">+</span><span class="mf">0.1</span><span class="p">]),</span><span class="nx">out</span><span class="p">]));</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">generateFrontRedLivery480</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">adjust</span> <span class="o">=</span> <span class="mf">0.38</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">adjustBase</span> <span class="o">=</span> <span class="mf">0.23</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">leng</span> <span class="o">=</span> <span class="mf">2.19</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">etr480adjust</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">adj</span> <span class="o">=</span> <span class="mf">2.9</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">cc0</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="o">-</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.08</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c0</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">height</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="nx">leng</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c3</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjustBase</span><span class="o">+</span><span class="mf">0.1</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjustBase</span><span class="o">+</span><span class="mf">0.1</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjustBase</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="mf">0.1</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjustBase</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span><span class="nx">trainHeight</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">c4</span> <span class="o">=</span> <span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S0</span><span class="p">)([[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.02</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="o">-</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="nx">leng</span><span class="o">+</span><span class="nx">adj</span><span class="p">],[</span><span class="nx">trainWidth</span><span class="o">+</span><span class="nx">adjust</span><span class="p">,</span><span class="nx">trainHeight</span><span class="o">*</span><span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="nx">etr480adjust</span><span class="o">-</span><span class="mf">0.02</span><span class="p">]]);</span>

    <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">MAP</span><span class="p">(</span><span class="nx">BEZIER</span><span class="p">(</span><span class="nx">S1</span><span class="p">)([</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">cc0</span><span class="p">,</span><span class="nx">c0</span><span class="p">,</span><span class="nx">c4</span><span class="p">,</span><span class="nx">c4</span><span class="p">,</span><span class="nx">c2</span><span class="p">,</span><span class="nx">c2</span><span class="p">,</span><span class="nx">c3</span><span class="p">,</span><span class="nx">c3</span><span class="p">,</span><span class="nx">c3</span><span class="p">]))(</span><span class="nx">dom2D</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">outT</span> <span class="o">=</span> <span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])(</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="nx">out</span><span class="p">);</span>
    <span class="nx">out</span> <span class="o">=</span> <span class="nx">R</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])(</span><span class="o">-</span><span class="nx">PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)(</span><span class="nx">outT</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">COLOR</span><span class="p">([</span><span class="mf">0.7</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])(</span><span class="nx">STRUCT</span><span class="p">([</span><span class="nx">T</span><span class="p">([</span><span class="mi">0</span><span class="p">])([</span><span class="o">-</span><span class="nx">etr450adjust</span><span class="o">+</span><span class="mf">0.1</span><span class="p">]),</span><span class="nx">out</span><span class="p">]));</span>

<span class="p">}</span>
</pre></div>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/livery480-1.png" alt="The front of ETR 480, without the livery"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/livery480-2.png" alt="The front of ETR 480, with the grey livery"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/livery480-3.png" alt="The front of ETR 480, with the final livery"></p>

<p>Finally, here's some screenshots of the whole model of ETR 480 and a link to the model in the <em>plasm.js</em> environment.</p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr480-1.png" alt="Model of ETR 480"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr480-2.png" alt="Model of ETR 480"></p>

<p><img src="https://raw.github.com/krelian87/krelian87.github.io/master/screenshot/etr480-3.png" alt="Model of ETR 480"></p>

<h2>
<a name="source-code" class="anchor" href="#source-code"><span class="octicon octicon-link"></span></a>Source Code</h2>

<p>These are the links for the source code of those 3D models.</p>

<ul>
<li><a href="https://github.com/cvdlab-cg/283934/blob/master/final-project/etr450model.js">Javascript ETR 450</a></li>
<li><a href="https://github.com/cvdlab-cg/283934/blob/master/final-project/etr480model.js">Javascript ETR 480</a></li>
<li><a href="https://github.com/cvdlab-cg/283934/blob/master/final-project/modelParts.py">Python code of some elements of ETR 450 / ETR 480</a></li>
</ul><h2>
<a name="credits" class="anchor" href="#credits"><span class="octicon octicon-link"></span></a>Credits</h2>

<p>Photos and text from <a href="http://en.wikipedia.org">Wikipedia</a>.<br>
This data is used for descriptive purpose only. No copyright infringement was intended.<br>
PLaSM, functional language for computing with geometry - <a href="http://www.plasm.net">official website</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
